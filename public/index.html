<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mission Control</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="app">
    <header class="header">
      <div class="header-left">
        <div class="brand">
          <span class="brand-mark">●</span>
          <h1>Mission Control</h1>
        </div>
        <span class="subtitle">Project Command Center</span>
      </div>
      <div class="header-right">
        <select id="businessFilter" class="filter-select">
          <option value="all">All Businesses</option>
        </select>
        <button id="newTaskBtn" class="btn btn-primary">+ New Task</button>
      </div>
    </header>

    <main class="main">
      <div class="board" id="board">
        <!-- Columns will be generated by JS -->
      </div>

      <aside class="sidebar">
        <div class="sidebar-header">
          <h3>Completed</h3>
          <a href="/history.html">View All →</a>
        </div>
        <div class="completed-list" id="completedList">
          <!-- Completed tasks will be generated by JS -->
        </div>
        
        <div class="activity-toggle">
          <button class="activity-toggle-btn" id="activityToggle">
            <span class="arrow">▶</span>
            Recent Activity
          </button>
          <div class="activity-list" id="activityList">
            <!-- Activities will be generated by JS -->
          </div>
        </div>
      </aside>
    </main>

    <nav class="mobile-nav" id="mobileNav">
      <button class="nav-btn" id="mobilePrev" aria-label="Previous column">◀</button>
      <div class="nav-center">
        <div class="nav-label">Column</div>
        <div class="nav-title" id="mobileColumnName">Backlog</div>
      </div>
      <a href="/history.html" class="nav-btn" aria-label="Completed tasks">✓</a>
      <button class="nav-btn nav-primary" id="mobileNewTask">＋</button>
      <button class="nav-btn" id="mobileNext" aria-label="Next column">▶</button>
    </nav>

    <!-- Task Modal -->
    <div class="modal" id="taskModal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="modalTitle">New Task</h2>
          <button class="modal-close" id="modalClose">&times;</button>
        </div>
        <form id="taskForm">
          <input type="hidden" id="taskId">
          <input type="hidden" id="originalColumn">

          <!-- Editable fields (shown in Backlog) -->
          <div id="editableFields">
            <div class="form-group">
              <label for="taskTitle">Title</label>
              <input type="text" id="taskTitle" placeholder="What needs to be done?">
            </div>

            <div class="form-group">
              <label for="taskDescription">Description</label>
              <textarea id="taskDescription" rows="3" placeholder="Additional details..."></textarea>
            </div>
          </div>

          <!-- Read-only fields (shown after Backlog) -->
          <div id="readonlyFields" style="display: none;">
            <div class="form-group">
              <label>Title</label>
              <div class="readonly-text" id="readonlyTitle"></div>
            </div>

            <div class="form-group">
              <label>Description</label>
              <div class="readonly-text" id="readonlyDescription"></div>
            </div>
          </div>

          <!-- Outcome (read-only, shown in Review) -->
          <div id="outcomeDisplay" class="form-group" style="display: none;">
            <label>Outcome</label>
            <div class="readonly-outcome" id="readonlyOutcome"></div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="taskBusiness">Business</label>
              <select id="taskBusiness" required>
                <!-- Options will be generated by JS -->
              </select>
            </div>

            <div class="form-group">
              <label for="taskPriority">Priority</label>
              <select id="taskPriority">
                <option value="low">Low</option>
                <option value="medium" selected>Medium</option>
                <option value="high">High</option>
                <option value="urgent">Urgent</option>
              </select>
            </div>
          </div>

          <div class="form-group">
            <label for="taskColumn">Status</label>
            <select id="taskColumn">
              <!-- Options will be generated by JS -->
            </select>
          </div>

          <div class="form-actions">
            <button type="button" class="btn btn-secondary" id="cancelBtn">Cancel</button>
            <button type="submit" class="btn btn-primary" id="saveBtn">Save Task</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Outcome Modal (shown when moving to Review) -->
    <div class="outcome-modal" id="outcomeModal">
      <div class="outcome-modal-content">
        <h3>What was accomplished?</h3>
        <p>Summarize what was done, include links to PRs, documents, or describe the changes made.</p>
        <textarea id="outcomeText" placeholder="e.g., PR #42 merged - added user authentication&#10;Doc: https://docs.google.com/...&#10;Deployed to staging environment"></textarea>
        <div class="outcome-modal-actions">
          <button class="btn btn-secondary btn-sm" id="outcomeCancel">Cancel</button>
          <button class="btn btn-primary btn-sm" id="outcomeSubmit">Submit for Review</button>
        </div>
      </div>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
